---
layout: blog
title: "[ë°±ì¤€] [C++] ğŸ”® êµ¬ìŠ¬ íƒˆì¶œ 2 13460ë²ˆ"
subtitle: "Gold - êµ¬í˜„"
date: 2024-05-10 17:50:00 +09:00
categories: PS
author: "hoonably"
# meta: "Springfield"
---


## ğŸ’¡ ë¬¸ì œ ì„¤ëª…

[êµ¬ìŠ¬ íƒˆì¶œ 2](https://www.acmicpc.net/problem/13460)

![image](https://github.com/hoonably/hoonably.github.io/assets/77783081/f737415d-8fe6-4504-803a-e4630bc051e3)

bfs ìµœë‹¨ê±°ë¦¬ ë¬¸ì œì´ë©´ì„œ, ê³µì´ ë‘ê°œë¼ì„œ êµ¬í˜„ì´ ê¹Œë‹¤ë¡­ë‹¤.




## ğŸ’¡ ì´ë™ í•¨ìˆ˜


4 ë°©í–¥ìœ¼ë¡œ ì´ë™í–ˆì„ë•Œ, 

ë¹¨ê°„ê³µê³¼ íŒŒë€ ê³µì˜ ìœ„ì¹˜ë¥¼ returní•´ì£¼ëŠ” í•¨ìˆ˜ë¥¼ ë§Œë“¤ì—ˆë‹¤.

í•­ìƒ ë°”ê¹¥ìª½ì—ëŠ” ë²½ì´ ìˆê¸° ë•Œë¬¸ì— ë°–ìœ¼ë¡œ ë–¨ì–´ì§ˆ ì¼ì€ ì—†ìœ¼ë‹ˆ ë²½ê³¼ ë§Œë‚ ë•Œê¹Œì§€ ì´ë™ì‹œì¼œì¤€ë‹¤.



- ì¤‘ê°„ì— ê³µì´ êµ¬ë©ìœ¼ë¡œ ë“¤ì–´ê°€ë©´ íŠ¹ë³„í•˜ê²Œ ì²˜ë¦¬í•´ì£¼ê¸° ìœ„í•´ì„œ, ì¢Œí‘œë¥¼ ìŒìˆ˜ë¡œ í‘œê¸°í•´ì¤€ë‹¤.



ë§Œì•½ íŒŒë€ ê³µê³¼ ë¹¨ê°„ ê³µì˜ ìœ„ì¹˜ê¹Œì§€ ìƒê°í•´ì„œ êµ¬í˜„í•˜ë ¤ë©´ ì•„ì£¼ ë³µì¡í•˜ê³  ê¸¸ì–´ì§€ëŠ”ë°,

ê·¸ë ‡ê²Œ í•˜ì§€ ë§ê³  ë¬´ì‹œí•˜ê³  ì´ë™ í•œ í›„, ë‘ ê³µì˜ ì¢Œí‘œê°€ ê°™ë‹¤ë©´ ì²˜ë¦¬ë¥¼ í•´ì£¼ë©´ ëœë‹¤.



- ì²˜ë¦¬ ë°©ë²•
- ì•„ë˜ ìƒíƒœì—ì„œ ì˜¤ë¥¸ìª½ìœ¼ë¡œ ê°„ë‹¤ê³  í•´ë³´ì.
- R . . . B . . #
- ê·¸ëƒ¥ ì´ë™ì„ í•˜ë©´ Rê³¼ Bê°€ ê°™ì€ ìœ„ì¹˜ì— ì°í ê²ƒì´ë‹¤.
- . . . . . . (RB) #
- ê°™ì€ ìœ„ì¹˜ë¼ë©´, ë°©í–¥ì— ë”°ë¼ì„œ ë’¤ë”°ë¼ì˜¤ë˜ ì• ë¥¼ í•œì¹¸ ì „ìœ¼ë¡œ ëŒë¦¬ë©´ ëœë‹¤.
- . . . . . R B #

```c++
// ì•„ë˜, ìœ„, ì˜¤ë¥¸, ì™¼
const int dx[] = { 1,-1,0,0 };
const int dy[] = { 0,0,1,-1 };

tuple<int,int,int,int> go(int dir, int rx, int ry, int bx, int by){

    int nrx=rx, nry=ry, nbx=bx, nby=by;
    // Red
    while(true){
        nrx+=dx[dir]; nry+=dy[dir];
        if (board[nrx][nry]=='#') {
            nrx-=dx[dir]; nry-=dy[dir];
            break;
        }
        // êµ¬ë©ìœ¼ë¡œ ë¹ ì§ : -1ë¡œ í‘œì‹œ
        if (board[nrx][nry]=='O'){
            nrx = -1; nry = -1;
            break;
        }
    } 
    // Blue
    while(true){
        nbx+=dx[dir]; nby+=dy[dir];
        if (board[nbx][nby]=='#') {
            nbx-=dx[dir]; nby-=dy[dir];
            break;
        }
        // êµ¬ë©ìœ¼ë¡œ ë¹ ì§ : -2ë¡œ í‘œì‹œ
        if (board[nbx][nby]=='O'){
            nbx = -2; nby = -2;
            break;
        }
    }
    // ë‘ ì¢Œí‘œê°€ ê°™ë‹¤ë©´ ê²¹ì¹  ìˆ˜ ì—†ìœ¼ë¯€ë¡œ ì²˜ë¦¬
    if(nrx==nbx && nry==nby){
        // ì•„ë˜ë¡œ ë‚´ë ¤ê°„ê±°ë¼ë©´ ìœ„ì—ìˆë˜ê±¸ í•œë‹¨ê³„ ì „ìœ¼ë¡œ
        if (dir==0){
            if (bx<rx) nbx -= dx[dir];
            else nrx -= dx[dir];
        }
        // ìœ„ë¡œ ì˜¬ë¼ê°„ê±°ë¼ë©´ ì•„ë˜ìˆë˜ê±¸ í•œë‹¨ê³„ ì „ìœ¼ë¡œ
        else if (dir==1){
            if (bx>rx) nbx -= dx[dir];
            else nrx -= dx[dir];
        }
        // ì˜¤ë¥¸ìª½ìœ¼ë¡œ ê°„ê±°ë¼ë©´ ì™¼ìª½ì— ìˆë˜ê±¸ í•œë‹¨ê³„ ì „ìœ¼ë¡œ
        else if (dir==2){
            if (by<ry) nby -= dy[dir];
            else nry -= dy[dir];
        }
        // ì™¼ìª½ìœ¼ë¡œ ê°„ê±°ë¼ë©´ ì˜¤ë¥¸ìª½ì— ìˆë˜ê±¸ í•œë‹¨ê³„ ì „ìœ¼ë¡œ
        else if (dir==3){
            if (by>ry) nby -= dy[dir];
            else nry -= dy[dir];
        }
    }

    return {nrx, nry, nbx, nby};
}
```


## ğŸ’¡ BFS ìµœë‹¨ê±°ë¦¬


BFS ì´ê¸° ë•Œë¬¸ì— distê°€ ë‚®ì€ ê²ƒë¶€í„° ì²˜ë¦¬ëœë‹¤.

10ë²ˆ ì•ˆì— ë„ì°©í•˜ì§€ ëª»í•˜ëŠ” ê²½ìš° ë°”ë¡œ ì¢…ë£Œì‹œì¼œì£¼ë©´ ëœë‹¤.

ìœ„ go í•¨ìˆ˜ë¥¼ í†µí•´ Bì˜ xì¢Œí‘œê°€ -2ê°€ ë˜ì—ˆë‹¤ë©´ ë¹ ì§„ ê²ƒì´ë¯€ë¡œ, ë”ì´ìƒ ì§„í–‰í•˜ì§€ ì•Šê³  ë‹¤ìŒ íë¡œ ì´ë™í•œë‹¤.

BëŠ” ì•ˆë¹ ì§€ë©´ì„œ Rì˜ xì¢Œí‘œê°€ -1ì´ë©´ ì„±ê³µí•œê²ƒì´ë¯€ë¡œ dist+1 ì„ ë¦¬í„´í•œë‹¤.

```c++
int bfs(int start_rx, int start_ry, int start_bx, int start_by){
    
    // Red ì¢Œí‘œ, Blueì¢Œí‘œ, ê±°ë¦¬
    queue<tuple<int,int,int,int,int>> q;
    q.push({start_rx, start_ry, start_bx, start_by, 0});
    visited[start_rx][start_ry][start_bx][start_by]=true;
    
    while (!q.empty()){
        auto [rx, ry, bx, by, now_dist] = q.front();

        // 10ë²ˆ ì•ˆì— ë„ì°© ëª»í–ˆì„ ê²½ìš°
        // 10ë„ í¬í•¨í•´ì•¼í•˜ëŠ” ì´ìœ  : ì§€ê¸ˆê¹Œì§€ ì˜¨ê²Œ 10ì´ë©´,
        // ë‹¤ìŒë‹¨ê³„ì— ë„ë‹¬í•´ë„ returnì€ 11ì´ ë˜ê¸° ë•Œë¬¸ì—
        if (now_dist>=10) {
            return -1;
        }

        q.pop();
        for (int i=0; i<4; i++){
            // ì´ë™
            auto [nrx, nry, nbx, nby] = go(i, rx, ry, bx, by);

            // íŒŒë€ìƒ‰ì´ êµ¬ë©ì— ë¹ ì§
            if (nbx==-2) continue;

            // íŒŒë€ìƒ‰ì€ ì•ˆë¹ ì§€ê³  ë¹¨ê°„ìƒ‰ì´ êµ¬ë©ì— ë¹ ì§€ë©´ ì¢…ë£Œ
            if (nrx==-1) return now_dist+1;

            if (visited[nrx][nry][nbx][nby]) continue;
            visited[nrx][nry][nbx][nby] = true;
            q.push({nrx, nry, nbx, nby, now_dist + 1});
        }
    }
    return -1;  // ë„ë‹¬ ëª»í–ˆì„ ê²½ìš°
}
```




## ğŸ’¡ ë‚´ í’€ì´


```c++
#include <bits/stdc++.h>
#define FOR(i,a,b) for(int i=(a);i<(b);i++)
#define all(v) v.begin(), v.end()
using namespace std;
typedef long long ll;
typedef pair<int,int> pii; typedef pair<ll,ll> pll;
typedef tuple<int,int,int> tiii;
const int INF = 0x7f7f7f7f;

/*--
https://www.acmicpc.net/problem/13460

ìƒí•˜ì¢Œìš°ë¡œ ê¸°ìš¸ì—¬ì„œ
Rì´ Oë¡œ ë“¤ì–´ê°€ì•¼í•¨.
ë™ì‹œì— R, B ê°€ ë“¤ì–´ê°€ë©´ ì•ˆë¨

#ì€ ì¥ì• ë¬¼, .ì€ ë¹ˆê³µê°„
*/

#define MAX 10

int N, M;
char board[MAX][MAX];
bool visited[MAX][MAX][MAX][MAX];  // ë¹¨ê°„ êµ¬ìŠ¬, íŒŒë€êµ¬ìŠ¬

// ì•„ë˜, ìœ„, ì˜¤ë¥¸, ì™¼
const int dx[] = { 1,-1,0,0 };
const int dy[] = { 0,0,1,-1 };

tuple<int,int,int,int> go(int dir, int rx, int ry, int bx, int by){

    int nrx=rx, nry=ry, nbx=bx, nby=by;
    // Red
    while(true){
        nrx+=dx[dir]; nry+=dy[dir];
        if (board[nrx][nry]=='#') {
            nrx-=dx[dir]; nry-=dy[dir];
            break;
        }
        // êµ¬ë©ìœ¼ë¡œ ë¹ ì§ : -1ë¡œ í‘œì‹œ
        if (board[nrx][nry]=='O'){
            nrx = -1; nry = -1;
            break;
        }
    } 
    // Blue
    while(true){
        nbx+=dx[dir]; nby+=dy[dir];
        if (board[nbx][nby]=='#') {
            nbx-=dx[dir]; nby-=dy[dir];
            break;
        }
        // êµ¬ë©ìœ¼ë¡œ ë¹ ì§ : -2ë¡œ í‘œì‹œ
        if (board[nbx][nby]=='O'){
            nbx = -2; nby = -2;
            break;
        }
    }
    // ë‘ ì¢Œí‘œê°€ ê°™ë‹¤ë©´ ê²¹ì¹  ìˆ˜ ì—†ìœ¼ë¯€ë¡œ ì²˜ë¦¬
    if(nrx==nbx && nry==nby){
        // ì•„ë˜ë¡œ ë‚´ë ¤ê°„ê±°ë¼ë©´ ìœ„ì—ìˆë˜ê±¸ í•œë‹¨ê³„ ì „ìœ¼ë¡œ
        if (dir==0){
            if (bx<rx) nbx -= dx[dir];
            else nrx -= dx[dir];
        }
        // ìœ„ë¡œ ì˜¬ë¼ê°„ê±°ë¼ë©´ ì•„ë˜ìˆë˜ê±¸ í•œë‹¨ê³„ ì „ìœ¼ë¡œ
        else if (dir==1){
            if (bx>rx) nbx -= dx[dir];
            else nrx -= dx[dir];
        }
        // ì˜¤ë¥¸ìª½ìœ¼ë¡œ ê°„ê±°ë¼ë©´ ì™¼ìª½ì— ìˆë˜ê±¸ í•œë‹¨ê³„ ì „ìœ¼ë¡œ
        else if (dir==2){
            if (by<ry) nby -= dy[dir];
            else nry -= dy[dir];
        }
        // ì™¼ìª½ìœ¼ë¡œ ê°„ê±°ë¼ë©´ ì˜¤ë¥¸ìª½ì— ìˆë˜ê±¸ í•œë‹¨ê³„ ì „ìœ¼ë¡œ
        else if (dir==3){
            if (by>ry) nby -= dy[dir];
            else nry -= dy[dir];
        }
    }

    return {nrx, nry, nbx, nby};
}

int bfs(int start_rx, int start_ry, int start_bx, int start_by){
    
    // Red ì¢Œí‘œ, Blueì¢Œí‘œ, ê±°ë¦¬
    queue<tuple<int,int,int,int,int>> q;
    q.push({start_rx, start_ry, start_bx, start_by, 0});
    visited[start_rx][start_ry][start_bx][start_by]=true;
    
    while (!q.empty()){
        auto [rx, ry, bx, by, now_dist] = q.front();

        // 10ë²ˆ ì•ˆì— ë„ì°© ëª»í–ˆì„ ê²½ìš°
        // 10ë„ í¬í•¨í•´ì•¼í•˜ëŠ” ì´ìœ  : ì§€ê¸ˆê¹Œì§€ ì˜¨ê²Œ 10ì´ë©´,
        // ë‹¤ìŒë‹¨ê³„ì— ë„ë‹¬í•´ë„ returnì€ 11ì´ ë˜ê¸° ë•Œë¬¸ì—
        if (now_dist>=10) {
            return -1;
        }

        q.pop();
        for (int i=0; i<4; i++){
            // ì´ë™
            auto [nrx, nry, nbx, nby] = go(i, rx, ry, bx, by);

            // íŒŒë€ìƒ‰ì´ êµ¬ë©ì— ë¹ ì§
            if (nbx==-2) continue;

            // íŒŒë€ìƒ‰ì€ ì•ˆë¹ ì§€ê³  ë¹¨ê°„ìƒ‰ì´ êµ¬ë©ì— ë¹ ì§€ë©´ ì¢…ë£Œ
            if (nrx==-1) return now_dist+1;

            if (visited[nrx][nry][nbx][nby]) continue;
            visited[nrx][nry][nbx][nby] = true;
            q.push({nrx, nry, nbx, nby, now_dist + 1});
        }
    }
    return -1;  // ë„ë‹¬ ëª»í–ˆì„ ê²½ìš°
}

int main(){
    ios_base::sync_with_stdio(0); cin.tie(0);
    
    cin >> N >> M;
    for (int i=0; i<N; i++){
        for (int j=0; j<M; j++){
            cin >> board[i][j];
        }
    }

    // ì‹œì‘ ì§€ì  ì°¾ê¸°
    int rx, ry, bx, by;
    for (int i=0; i<N; i++)
        for (int j=0; j<M; j++)
            if (board[i][j]=='R'){
                rx = i; ry = j; break;
            }
    for (int i=0; i<N; i++)
        for (int j=0; j<M; j++)
            if (board[i][j]=='B'){
                bx = i; by = j; break;
            }

    cout << bfs(rx, ry, bx, by);
    
    return 0;
}
```




## ğŸ’¡ ì œì¶œ ê²°ê³¼ 


![image](https://github.com/hoonably/hoonably.github.io/assets/77783081/7954786c-0fb0-4847-aaf4-e79c7b7b54f8)




## ğŸ’¡ ë§ˆë¬´ë¦¬ 


ë‚´ê°€ í’€ê³ ë„ ë¹¨ê°„ ê³µê³¼ íŒŒë€ ê³µì´ ë§Œë‚ ë•Œ ì²˜ë¦¬ë¥¼ ì˜ í•´ì¤€ ê²ƒ ê°™ì•„ì„œ ë§Œì¡±í–ˆë‹¤.

ì´ ì½”ë“œë¥¼ ì¡°ê¸ˆë§Œ ìˆ˜ì •í•´ë„ êµ¬ìŠ¬ íƒˆì¶œ 3, 4ë„ ì†ì‰½ê²Œ í’€ ìˆ˜ ìˆë‹¤.
